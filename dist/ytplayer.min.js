"use strict";var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var YTPlayer=function(){function e(t){_classCallCheck(this,e),this.element=t,this.playlistId=this.element.getAttribute("data-playlist-id"),this.videoId=this.element.getAttribute("data-video-id"),this.playlistId?this.fetchPlaylist():this.showVideo(this.videoId)}return _createClass(e,[{key:"fetchPlaylist",value:function(){var e=this;gapi.client.youtube.playlistItems.list({part:"snippet",playlistId:this.playlistId,maxResults:50}).then(function(t){for(var i=t.result.items,a=void 0,l=0;l<i.length;l++){var r=i[l].snippet;e.addItem(r),0===l&&(a=r.resourceId.videoId)}e.showVideo(a);var s=e.element.querySelectorAll(".ytplayer-list li")[0];e.updatePlaylist(s)})}},{key:"updateVideo",value:function(e){var t=e.getAttribute("data-id");this.player.loadVideoById(t)}},{key:"updatePlaylist",value:function(e){var t=e.parentNode.querySelectorAll("li"),i=this.element.querySelector(".ytplayer-title"),a=this.element.querySelector(".ytplayer-description");i&&(i.innerHTML=e.getAttribute("data-title")),a&&(a.innerHTML=e.getAttribute("data-description")),Array.prototype.forEach.call(t,function(e,t){e.classList.remove("selected")}),e.classList.add("selected")}},{key:"addItem",value:function(e){var t=this,i=this.element.querySelector(".ytplayer-list"),a=e.thumbnails.medium.url,l=e.resourceId.videoId,r='<img src="'+a+'" />',s=document.createElement("li");s.innerHTML=r,s.setAttribute("data-id",l),s.setAttribute("data-title",e.title),s.setAttribute("data-description",e.description),s.addEventListener("click",function(e){var i=e.target.parentNode;t.updatePlaylist(i),t.updateVideo(i)}),i.appendChild(s)}},{key:"showVideo",value:function(e){this.player=new YT.Player(this.element.querySelector(".ytplayer-video"),{videoId:e,playerVars:{autoplay:0,rel:0,showinfo:0},events:{}})}}]),e}();