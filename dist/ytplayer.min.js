var a=class{constructor(t){this.element=t.element,this.cb_playlist_click=t.cb_playlist_click,this.cb_init=t.cb_init,this.playlistId=this.element.getAttribute("data-playlist-id"),this.videoId=this.element.getAttribute("data-video-id"),this.playlistId?this.fetchPlaylist():this.fetchVideo()}fetchVideo(){gapi.client.youtube.videos.list({part:"snippet",id:this.videoId}).then(t=>{let e=t.result.items[0].snippet;this.showVideo(this.videoId),this.updateVideoInfo(e.title,e.description),typeof this.cb_init=="function"&&this.cb_init()})}fetchPlaylist(){gapi.client.youtube.playlistItems.list({part:"snippet",playlistId:this.playlistId,maxResults:50}).then(t=>{let e=t.result.items,i;for(let d=0;d<e.length;d++){let s=e[d].snippet;this.addItem(s),d===0&&(i=s.resourceId.videoId)}this.showVideo(i);let l=this.element.querySelectorAll(".ytplayer-list li")[0];this.updatePlaylist(l),typeof this.cb_init=="function"&&this.cb_init()})}updateVideo(t){let e=t.getAttribute("data-id");this.player.loadVideoById(e)}updatePlaylist(t){let i=t.parentNode.querySelectorAll("li");Array.prototype.forEach.call(i,function(l){l.classList.remove("selected")}),t.classList.add("selected"),this.updateVideoInfo(t.getAttribute("data-title"),t.getAttribute("data-description"))}updateVideoInfo(t,e){let i=this.element.querySelector(".ytplayer-title"),l=this.element.querySelector(".ytplayer-description");i&&(i.innerHTML=t),l&&(l.innerHTML=e)}addItem(t){let e=this.element.querySelector(".ytplayer-list");if(!t.thumbnails){console.warn("Item has no thumbnails!",t);return}let i=t.thumbnails.medium.url,l=t.resourceId.videoId,d=`<img src="${i}" />`,s=document.createElement("li");s.innerHTML=d,s.setAttribute("data-id",l),s.setAttribute("data-title",t.title),s.setAttribute("data-description",t.description),s.addEventListener("click",n=>{let o=n.target.parentNode;this.updatePlaylist(o),this.updateVideo(o),typeof this.cb_playlist_click=="function"&&this.cb_playlist_click(o)}),e.appendChild(s)}showVideo(t){this.player=new YT.Player(this.element.querySelector(".ytplayer-video"),{videoId:t,playerVars:{rel:0,showinfo:0},events:{}})}};export{a as default};
//# sourceMappingURL=ytplayer.min.js.map
