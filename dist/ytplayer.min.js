"use strict";var _createClass=function(){function e(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,i,a){return i&&e(t.prototype,i),a&&e(t,a),t}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var YTPlayer=function(){function e(t){_classCallCheck(this,e),this.element=t,this.playlistId=this.element.getAttribute("data-playlist-id"),this.videoId=this.element.getAttribute("data-video-id"),this.playlistId?this.fetchPlaylist():this.fetchVideo()}return _createClass(e,[{key:"fetchVideo",value:function(){var e=this;gapi.client.youtube.videos.list({part:"snippet",id:this.videoId}).then(function(t){var i=t.result.items[0].snippet;e.showVideo(e.videoId),e.updateVideoInfo(i.title,i.description)})}},{key:"fetchPlaylist",value:function(){var e=this;gapi.client.youtube.playlistItems.list({part:"snippet",playlistId:this.playlistId,maxResults:50}).then(function(t){for(var i=t.result.items,a=void 0,l=0;l<i.length;l++){var r=i[l].snippet;e.addItem(r),0===l&&(a=r.resourceId.videoId)}e.showVideo(a);var n=e.element.querySelectorAll(".ytplayer-list li")[0];e.updatePlaylist(n)})}},{key:"updateVideo",value:function(e){var t=e.getAttribute("data-id");this.player.loadVideoById(t)}},{key:"updatePlaylist",value:function(e){var t=e.parentNode.querySelectorAll("li");Array.prototype.forEach.call(t,function(e,t){e.classList.remove("selected")}),e.classList.add("selected"),this.updateVideoInfo(e.getAttribute("data-title"),e.getAttribute("data-description"))}},{key:"updateVideoInfo",value:function(e,t){var i=this.element.querySelector(".ytplayer-title"),a=this.element.querySelector(".ytplayer-description");i&&(i.innerHTML=e),a&&(a.innerHTML=t)}},{key:"addItem",value:function(e){var t=this,i=this.element.querySelector(".ytplayer-list"),a=e.thumbnails.medium.url,l=e.resourceId.videoId,r='<img src="'+a+'" />',n=document.createElement("li");n.innerHTML=r,n.setAttribute("data-id",l),n.setAttribute("data-title",e.title),n.setAttribute("data-description",e.description),n.addEventListener("click",function(e){var i=e.target.parentNode;t.updatePlaylist(i),t.updateVideo(i)}),i.appendChild(n)}},{key:"showVideo",value:function(e){this.player=new YT.Player(this.element.querySelector(".ytplayer-video"),{videoId:e,playerVars:{autoplay:0,rel:0,showinfo:0},events:{}})}}]),e}();