{"version":3,"file":"ytplayer.js","sources":["src/ytplayer.js"],"sourcesContent":["/*\n * @name          ytplayer.js\n * @version       1.1.0\n * @lastmodified  2018-02-06\n * @author        Saeid Mohadjer\n * @repo\t\t  https://github.com/smohadjer/youtube-playlist\n *\n * Licensed under the MIT License\n */\n\n'use strict';\n\nexport default class YTPlayer {\n\tconstructor(options) {\n\t\tthis.element = options.element;\n\t\tthis.cb_playlist_click = options.cb_playlist_click;\n\t\tthis.cb_init = options.cb_init;\n\t\tthis.playlistId = this.element.getAttribute('data-playlist-id');\n\t\tthis.videoId = this.element.getAttribute('data-video-id');\n\n\t\tif (this.playlistId) {\n\t\t\tthis.fetchPlaylist();\n\t\t} else {\n\t\t\tthis.fetchVideo();\n\t\t}\n\t}\n\n\tfetchVideo() {\n\t\t/*global gapi*/\n\t\tgapi.client.youtube.videos.list({\n\t\t\tpart: 'snippet',\n\t\t\tid: this.videoId\n\t\t}).then((response) => {\n\t\t\tconst snippet = response.result.items[0].snippet;\n\t\t\tthis.showVideo(this.videoId);\n\t\t\tthis.updateVideoInfo(snippet.title, snippet.description);\n\t\t\tif (typeof this.cb_init === 'function') {\n\t\t\t\tthis.cb_init();\n\t\t\t}\n\t\t});\n\t}\n\n\tfetchPlaylist() {\n\t\tgapi.client.youtube.playlistItems.list({\n\t\t\tpart: 'snippet',\n\t\t\tplaylistId: this.playlistId,\n\t\t\tmaxResults: 50\n\t\t}).then((response) => {\n\n\t\t\tlet items = response.result.items;\n\t\t\tlet videoId;\n\n\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\tconst snippet = items[i].snippet;\n\t\t\t\tthis.addItem(snippet);\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tvideoId = snippet.resourceId.videoId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//display first video in playlist\n\t\t\tthis.showVideo(videoId);\n\t\t\tlet li = this.element.querySelectorAll('.ytplayer-list li')[0];\n\t\t\tthis.updatePlaylist(li);\n\t\t\tif (typeof this.cb_init === 'function') {\n\t\t\t\tthis.cb_init();\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateVideo(li) {\n\t\tconst videoId = li.getAttribute('data-id');\n\t\tthis.player.loadVideoById(videoId);\n\t}\n\n\tupdatePlaylist(li) {\n\t\tconst ul = li.parentNode;\n\t\tconst thumbs = ul.querySelectorAll('li');\n\n\t\tArray.prototype.forEach.call(thumbs, function(el){\n\t\t\tel.classList.remove('selected');\n\t\t});\n\n\t\tli.classList.add('selected');\n\n\t\tthis.updateVideoInfo(li.getAttribute('data-title'), li.getAttribute('data-description'));\n\t}\n\n\tupdateVideoInfo(title, description) {\n\t\tconst titleElement = this.element.querySelector('.ytplayer-title');\n\t\tconst descriptionElement = this.element.querySelector('.ytplayer-description');\n\n\t\tif (titleElement) {\n\t\t\ttitleElement.innerHTML = title;\n\t\t}\n\n\t\tif (descriptionElement) {\n\t\t\tdescriptionElement.innerHTML = description;\n\t\t}\n\t}\n\n\taddItem(snippet) {\n\t\tconst ul = this.element.querySelector('.ytplayer-list');\n\t\tconst thumbnail = snippet.thumbnails.medium.url;\n\t\tconst videoId = snippet.resourceId.videoId;\n\t\tconst img = `<img src=\"${thumbnail}\" />`;\n\t\tconst li = document.createElement('li');\n\n\t\tli.innerHTML = img;\n\t\tli.setAttribute('data-id', videoId);\n\t\tli.setAttribute('data-title', snippet.title);\n\t\tli.setAttribute('data-description', snippet.description);\n\t\tli.addEventListener('click', (event) => {\n\t\t\tconst li = event.target.parentNode;\n\t\t\tthis.updatePlaylist(li);\n\t\t\tthis.updateVideo(li);\n\n\t\t\tif (typeof this.cb_playlist_click === 'function') {\n\t\t\t\tthis.cb_playlist_click(li);\n\t\t\t}\n\t\t});\n\n\t\tul.appendChild(li);\n\t}\n\n\tshowVideo(videoId) {\n\t\t/*global YT*/\n\t\tthis.player = new YT.Player(this.element.querySelector('.ytplayer-video'), {\n\t\t\tvideoId: videoId,\n\t\t\tplayerVars: {\n\t\t\t\t'rel': 0,\n\t\t\t\t'showinfo': 0\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\t//'onReady': onPlayerReady,\n\t\t\t\t//'onStateChange': onPlayerStateChange\n\t\t\t}\n\t\t});\n\t}\n}\n"],"names":[],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9zbW9oYWRqZXIvRG9jdW1lbnRzL3lvdXR1YmUtcGxheWxpc3Qvc3JjL3l0cGxheWVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBAbmFtZSAgICAgICAgICB5dHBsYXllci5qc1xuICogQHZlcnNpb24gICAgICAgMS4xLjBcbiAqIEBsYXN0bW9kaWZpZWQgIDIwMTgtMDItMDZcbiAqIEBhdXRob3IgICAgICAgIFNhZWlkIE1vaGFkamVyXG4gKiBAcmVwb1x0XHQgIGh0dHBzOi8vZ2l0aHViLmNvbS9zbW9oYWRqZXIveW91dHViZS1wbGF5bGlzdFxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZVxuICovXG5cbid1c2Ugc3RyaWN0JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgWVRQbGF5ZXIge1xuXHRjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG5cdFx0dGhpcy5lbGVtZW50ID0gb3B0aW9ucy5lbGVtZW50O1xuXHRcdHRoaXMuY2JfcGxheWxpc3RfY2xpY2sgPSBvcHRpb25zLmNiX3BsYXlsaXN0X2NsaWNrO1xuXHRcdHRoaXMuY2JfaW5pdCA9IG9wdGlvbnMuY2JfaW5pdDtcblx0XHR0aGlzLnBsYXlsaXN0SWQgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXBsYXlsaXN0LWlkJyk7XG5cdFx0dGhpcy52aWRlb0lkID0gdGhpcy5lbGVtZW50LmdldEF0dHJpYnV0ZSgnZGF0YS12aWRlby1pZCcpO1xuXG5cdFx0aWYgKHRoaXMucGxheWxpc3RJZCkge1xuXHRcdFx0dGhpcy5mZXRjaFBsYXlsaXN0KCk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZmV0Y2hWaWRlbygpO1xuXHRcdH1cblx0fVxuXG5cdGZldGNoVmlkZW8oKSB7XG5cdFx0LypnbG9iYWwgZ2FwaSovXG5cdFx0Z2FwaS5jbGllbnQueW91dHViZS52aWRlb3MubGlzdCh7XG5cdFx0XHRwYXJ0OiAnc25pcHBldCcsXG5cdFx0XHRpZDogdGhpcy52aWRlb0lkXG5cdFx0fSkudGhlbigocmVzcG9uc2UpID0+IHtcblx0XHRcdGNvbnN0IHNuaXBwZXQgPSByZXNwb25zZS5yZXN1bHQuaXRlbXNbMF0uc25pcHBldDtcblx0XHRcdHRoaXMuc2hvd1ZpZGVvKHRoaXMudmlkZW9JZCk7XG5cdFx0XHR0aGlzLnVwZGF0ZVZpZGVvSW5mbyhzbmlwcGV0LnRpdGxlLCBzbmlwcGV0LmRlc2NyaXB0aW9uKTtcblx0XHRcdGlmICh0eXBlb2YgdGhpcy5jYl9pbml0ID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHRoaXMuY2JfaW5pdCgpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0ZmV0Y2hQbGF5bGlzdCgpIHtcblx0XHRnYXBpLmNsaWVudC55b3V0dWJlLnBsYXlsaXN0SXRlbXMubGlzdCh7XG5cdFx0XHRwYXJ0OiAnc25pcHBldCcsXG5cdFx0XHRwbGF5bGlzdElkOiB0aGlzLnBsYXlsaXN0SWQsXG5cdFx0XHRtYXhSZXN1bHRzOiA1MFxuXHRcdH0pLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG5cblx0XHRcdGxldCBpdGVtcyA9IHJlc3BvbnNlLnJlc3VsdC5pdGVtcztcblx0XHRcdGxldCB2aWRlb0lkO1xuXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW1zLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRcdGNvbnN0IHNuaXBwZXQgPSBpdGVtc1tpXS5zbmlwcGV0O1xuXHRcdFx0XHR0aGlzLmFkZEl0ZW0oc25pcHBldCk7XG5cdFx0XHRcdGlmIChpID09PSAwKSB7XG5cdFx0XHRcdFx0dmlkZW9JZCA9IHNuaXBwZXQucmVzb3VyY2VJZC52aWRlb0lkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vZGlzcGxheSBmaXJzdCB2aWRlbyBpbiBwbGF5bGlzdFxuXHRcdFx0dGhpcy5zaG93VmlkZW8odmlkZW9JZCk7XG5cdFx0XHRsZXQgbGkgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnl0cGxheWVyLWxpc3QgbGknKVswXTtcblx0XHRcdHRoaXMudXBkYXRlUGxheWxpc3QobGkpO1xuXHRcdFx0aWYgKHR5cGVvZiB0aGlzLmNiX2luaXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0dGhpcy5jYl9pbml0KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHR1cGRhdGVWaWRlbyhsaSkge1xuXHRcdGNvbnN0IHZpZGVvSWQgPSBsaS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnKTtcblx0XHR0aGlzLnBsYXllci5sb2FkVmlkZW9CeUlkKHZpZGVvSWQpO1xuXHR9XG5cblx0dXBkYXRlUGxheWxpc3QobGkpIHtcblx0XHRjb25zdCB1bCA9IGxpLnBhcmVudE5vZGU7XG5cdFx0Y29uc3QgdGh1bWJzID0gdWwucXVlcnlTZWxlY3RvckFsbCgnbGknKTtcblxuXHRcdEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwodGh1bWJzLCBmdW5jdGlvbihlbCl7XG5cdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdzZWxlY3RlZCcpO1xuXHRcdH0pO1xuXG5cdFx0bGkuY2xhc3NMaXN0LmFkZCgnc2VsZWN0ZWQnKTtcblxuXHRcdHRoaXMudXBkYXRlVmlkZW9JbmZvKGxpLmdldEF0dHJpYnV0ZSgnZGF0YS10aXRsZScpLCBsaS5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGVzY3JpcHRpb24nKSk7XG5cdH1cblxuXHR1cGRhdGVWaWRlb0luZm8odGl0bGUsIGRlc2NyaXB0aW9uKSB7XG5cdFx0Y29uc3QgdGl0bGVFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy55dHBsYXllci10aXRsZScpO1xuXHRcdGNvbnN0IGRlc2NyaXB0aW9uRWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcueXRwbGF5ZXItZGVzY3JpcHRpb24nKTtcblxuXHRcdGlmICh0aXRsZUVsZW1lbnQpIHtcblx0XHRcdHRpdGxlRWxlbWVudC5pbm5lckhUTUwgPSB0aXRsZTtcblx0XHR9XG5cblx0XHRpZiAoZGVzY3JpcHRpb25FbGVtZW50KSB7XG5cdFx0XHRkZXNjcmlwdGlvbkVsZW1lbnQuaW5uZXJIVE1MID0gZGVzY3JpcHRpb247XG5cdFx0fVxuXHR9XG5cblx0YWRkSXRlbShzbmlwcGV0KSB7XG5cdFx0Y29uc3QgdWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLnl0cGxheWVyLWxpc3QnKTtcblx0XHRjb25zdCB0aHVtYm5haWwgPSBzbmlwcGV0LnRodW1ibmFpbHMubWVkaXVtLnVybDtcblx0XHRjb25zdCB2aWRlb0lkID0gc25pcHBldC5yZXNvdXJjZUlkLnZpZGVvSWQ7XG5cdFx0Y29uc3QgaW1nID0gYDxpbWcgc3JjPVwiJHt0aHVtYm5haWx9XCIgLz5gO1xuXHRcdGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuXHRcdGxpLmlubmVySFRNTCA9IGltZztcblx0XHRsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCB2aWRlb0lkKTtcblx0XHRsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCBzbmlwcGV0LnRpdGxlKTtcblx0XHRsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtZGVzY3JpcHRpb24nLCBzbmlwcGV0LmRlc2NyaXB0aW9uKTtcblx0XHRsaS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuXHRcdFx0Y29uc3QgbGkgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcblx0XHRcdHRoaXMudXBkYXRlUGxheWxpc3QobGkpO1xuXHRcdFx0dGhpcy51cGRhdGVWaWRlbyhsaSk7XG5cblx0XHRcdGlmICh0eXBlb2YgdGhpcy5jYl9wbGF5bGlzdF9jbGljayA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHR0aGlzLmNiX3BsYXlsaXN0X2NsaWNrKGxpKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHVsLmFwcGVuZENoaWxkKGxpKTtcblx0fVxuXG5cdHNob3dWaWRlbyh2aWRlb0lkKSB7XG5cdFx0LypnbG9iYWwgWVQqL1xuXHRcdHRoaXMucGxheWVyID0gbmV3IFlULlBsYXllcih0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLnl0cGxheWVyLXZpZGVvJyksIHtcblx0XHRcdHZpZGVvSWQ6IHZpZGVvSWQsXG5cdFx0XHRwbGF5ZXJWYXJzOiB7XG5cdFx0XHRcdCdyZWwnOiAwLFxuXHRcdFx0XHQnc2hvd2luZm8nOiAwXG5cdFx0XHR9LFxuXHRcdFx0ZXZlbnRzOiB7XG5cdFx0XHRcdC8vJ29uUmVhZHknOiBvblBsYXllclJlYWR5LFxuXHRcdFx0XHQvLydvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7Ozs7Ozs7Ozs7QUFVQSxZQUFZLENBQUM7O0FBRWIsQUFBZSxNQUFNLFFBQVEsQ0FBQztDQUM3QixXQUFXLENBQUMsT0FBTyxFQUFFO0VBQ3BCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztFQUMvQixJQUFJLENBQUMsaUJBQWlCLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0VBQ25ELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztFQUMvQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLGtCQUFrQixDQUFDLENBQUM7RUFDaEUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQzs7RUFFMUQsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO0dBQ3BCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztHQUNyQixNQUFNO0dBQ04sSUFBSSxDQUFDLFVBQVUsRUFBRSxDQUFDO0dBQ2xCO0VBQ0Q7O0NBRUQsVUFBVSxHQUFHOztFQUVaLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUM7R0FDL0IsSUFB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"}