{"version":3,"file":"ytplayer.js","sources":["src/ytplayer.js"],"sourcesContent":["/*\n * @name          ytplayer.js\n * @version       1.1.0\n * @lastmodified  2018-02-06\n * @author        Saeid Mohadjer\n * @repo\t\t  https://github.com/smohadjer/youtube-playlist\n *\n * Licensed under the MIT License\n */\n\n'use strict';\n\nexport default class YTPlayer {\n\tconstructor(options) {\n\t\tthis.element = options.element;\n\t\tthis.cb_playlist_click = options.cb_playlist_click;\n\t\tthis.cb_init = options.cb_init;\n\t\tthis.playlistId = this.element.getAttribute('data-playlist-id');\n\t\tthis.videoId = this.element.getAttribute('data-video-id');\n\n\t\tif (this.playlistId) {\n\t\t\tthis.fetchPlaylist();\n\t\t} else {\n\t\t\tthis.fetchVideo();\n\t\t}\n\t}\n\n\tfetchVideo() {\n\t\t/*global gapi*/\n\t\tgapi.client.youtube.videos.list({\n\t\t\tpart: 'snippet',\n\t\t\tid: this.videoId\n\t\t}).then((response) => {\n\t\t\tconst snippet = response.result.items[0].snippet;\n\t\t\tthis.showVideo(this.videoId);\n\t\t\tthis.updateVideoInfo(snippet.title, snippet.description);\n\t\t\tif (typeof this.cb_init === 'function') {\n\t\t\t\tthis.cb_init();\n\t\t\t}\n\t\t});\n\t}\n\n\tfetchPlaylist() {\n\t\tgapi.client.youtube.playlistItems.list({\n\t\t\tpart: 'snippet',\n\t\t\tplaylistId: this.playlistId,\n\t\t\tmaxResults: 50\n\t\t}).then((response) => {\n\n\t\t\tlet items = response.result.items;\n\t\t\tlet videoId;\n\n\t\t\tfor (let i = 0; i < items.length; i++) {\n\t\t\t\tconst snippet = items[i].snippet;\n\t\t\t\tthis.addItem(snippet);\n\t\t\t\tif (i === 0) {\n\t\t\t\t\tvideoId = snippet.resourceId.videoId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//display first video in playlist\n\t\t\tthis.showVideo(videoId);\n\t\t\tlet li = this.element.querySelectorAll('.ytplayer-list li')[0];\n\t\t\tthis.updatePlaylist(li);\n\t\t\tif (typeof this.cb_init === 'function') {\n\t\t\t\tthis.cb_init();\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateVideo(li) {\n\t\tconst videoId = li.getAttribute('data-id');\n\t\tthis.player.loadVideoById(videoId);\n\t}\n\n\tupdatePlaylist(li) {\n\t\tconst ul = li.parentNode;\n\t\tconst thumbs = ul.querySelectorAll('li');\n\n\t\tArray.prototype.forEach.call(thumbs, function(el){\n\t\t\tel.classList.remove('selected');\n\t\t});\n\n\t\tli.classList.add('selected');\n\n\t\tthis.updateVideoInfo(li.getAttribute('data-title'), li.getAttribute('data-description'));\n\t}\n\n\tupdateVideoInfo(title, description) {\n\t\tconst titleElement = this.element.querySelector('.ytplayer-title');\n\t\tconst descriptionElement = this.element.querySelector('.ytplayer-description');\n\n\t\tif (titleElement) {\n\t\t\ttitleElement.innerHTML = title;\n\t\t}\n\n\t\tif (descriptionElement) {\n\t\t\tdescriptionElement.innerHTML = description;\n\t\t}\n\t}\n\n\taddItem(snippet) {\n\t\tconst ul = this.element.querySelector('.ytplayer-list');\n\n\t\tif (!snippet.thumbnails) {\n\t\t\tconsole.warn('Item has no thumbnails!', snippet);\n\t\t\treturn;\n\t\t}\n\n\t\tconst thumbnail = snippet.thumbnails.medium.url;\n\t\tconst videoId = snippet.resourceId.videoId;\n\t\tconst img = `<img src=\"${thumbnail}\" />`;\n\t\tconst li = document.createElement('li');\n\n\t\tli.innerHTML = img;\n\t\tli.setAttribute('data-id', videoId);\n\t\tli.setAttribute('data-title', snippet.title);\n\t\tli.setAttribute('data-description', snippet.description);\n\t\tli.addEventListener('click', (event) => {\n\t\t\tconst li = event.target.parentNode;\n\t\t\tthis.updatePlaylist(li);\n\t\t\tthis.updateVideo(li);\n\n\t\t\tif (typeof this.cb_playlist_click === 'function') {\n\t\t\t\tthis.cb_playlist_click(li);\n\t\t\t}\n\t\t});\n\n\t\tul.appendChild(li);\n\t}\n\n\tshowVideo(videoId) {\n\t\t/*global YT*/\n\t\tthis.player = new YT.Player(this.element.querySelector('.ytplayer-video'), {\n\t\t\tvideoId: videoId,\n\t\t\tplayerVars: {\n\t\t\t\t'rel': 0,\n\t\t\t\t'showinfo': 0\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\t//'onReady': onPlayerReady,\n\t\t\t\t//'onStateChange': onPlayerStateChange\n\t\t\t}\n\t\t});\n\t}\n}\n"],"names":[],"mappings":"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","preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjpudWxsLCJzb3VyY2VzIjpbIi9Vc2Vycy9zbS9Eb2N1bWVudHMveW91dHViZS1wbGF5bGlzdC9zcmMveXRwbGF5ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqIEBuYW1lICAgICAgICAgIHl0cGxheWVyLmpzXG4gKiBAdmVyc2lvbiAgICAgICAxLjEuMFxuICogQGxhc3Rtb2RpZmllZCAgMjAxOC0wMi0wNlxuICogQGF1dGhvciAgICAgICAgU2FlaWQgTW9oYWRqZXJcbiAqIEByZXBvXHRcdCAgaHR0cHM6Ly9naXRodWIuY29tL3Ntb2hhZGplci95b3V0dWJlLXBsYXlsaXN0XG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBZVFBsYXllciB7XG5cdGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcblx0XHR0aGlzLmVsZW1lbnQgPSBvcHRpb25zLmVsZW1lbnQ7XG5cdFx0dGhpcy5jYl9wbGF5bGlzdF9jbGljayA9IG9wdGlvbnMuY2JfcGxheWxpc3RfY2xpY2s7XG5cdFx0dGhpcy5jYl9pbml0ID0gb3B0aW9ucy5jYl9pbml0O1xuXHRcdHRoaXMucGxheWxpc3RJZCA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcGxheWxpc3QtaWQnKTtcblx0XHR0aGlzLnZpZGVvSWQgPSB0aGlzLmVsZW1lbnQuZ2V0QXR0cmlidXRlKCdkYXRhLXZpZGVvLWlkJyk7XG5cblx0XHRpZiAodGhpcy5wbGF5bGlzdElkKSB7XG5cdFx0XHR0aGlzLmZldGNoUGxheWxpc3QoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5mZXRjaFZpZGVvKCk7XG5cdFx0fVxuXHR9XG5cblx0ZmV0Y2hWaWRlbygpIHtcblx0XHQvKmdsb2JhbCBnYXBpKi9cblx0XHRnYXBpLmNsaWVudC55b3V0dWJlLnZpZGVvcy5saXN0KHtcblx0XHRcdHBhcnQ6ICdzbmlwcGV0Jyxcblx0XHRcdGlkOiB0aGlzLnZpZGVvSWRcblx0XHR9KS50aGVuKChyZXNwb25zZSkgPT4ge1xuXHRcdFx0Y29uc3Qgc25pcHBldCA9IHJlc3BvbnNlLnJlc3VsdC5pdGVtc1swXS5zbmlwcGV0O1xuXHRcdFx0dGhpcy5zaG93VmlkZW8odGhpcy52aWRlb0lkKTtcblx0XHRcdHRoaXMudXBkYXRlVmlkZW9JbmZvKHNuaXBwZXQudGl0bGUsIHNuaXBwZXQuZGVzY3JpcHRpb24pO1xuXHRcdFx0aWYgKHR5cGVvZiB0aGlzLmNiX2luaXQgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0dGhpcy5jYl9pbml0KCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHRmZXRjaFBsYXlsaXN0KCkge1xuXHRcdGdhcGkuY2xpZW50LnlvdXR1YmUucGxheWxpc3RJdGVtcy5saXN0KHtcblx0XHRcdHBhcnQ6ICdzbmlwcGV0Jyxcblx0XHRcdHBsYXlsaXN0SWQ6IHRoaXMucGxheWxpc3RJZCxcblx0XHRcdG1heFJlc3VsdHM6IDUwXG5cdFx0fSkudGhlbigocmVzcG9uc2UpID0+IHtcblxuXHRcdFx0bGV0IGl0ZW1zID0gcmVzcG9uc2UucmVzdWx0Lml0ZW1zO1xuXHRcdFx0bGV0IHZpZGVvSWQ7XG5cblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0Y29uc3Qgc25pcHBldCA9IGl0ZW1zW2ldLnNuaXBwZXQ7XG5cdFx0XHRcdHRoaXMuYWRkSXRlbShzbmlwcGV0KTtcblx0XHRcdFx0aWYgKGkgPT09IDApIHtcblx0XHRcdFx0XHR2aWRlb0lkID0gc25pcHBldC5yZXNvdXJjZUlkLnZpZGVvSWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly9kaXNwbGF5IGZpcnN0IHZpZGVvIGluIHBsYXlsaXN0XG5cdFx0XHR0aGlzLnNob3dWaWRlbyh2aWRlb0lkKTtcblx0XHRcdGxldCBsaSA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcueXRwbGF5ZXItbGlzdCBsaScpWzBdO1xuXHRcdFx0dGhpcy51cGRhdGVQbGF5bGlzdChsaSk7XG5cdFx0XHRpZiAodHlwZW9mIHRoaXMuY2JfaW5pdCA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHR0aGlzLmNiX2luaXQoKTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdHVwZGF0ZVZpZGVvKGxpKSB7XG5cdFx0Y29uc3QgdmlkZW9JZCA9IGxpLmdldEF0dHJpYnV0ZSgnZGF0YS1pZCcpO1xuXHRcdHRoaXMucGxheWVyLmxvYWRWaWRlb0J5SWQodmlkZW9JZCk7XG5cdH1cblxuXHR1cGRhdGVQbGF5bGlzdChsaSkge1xuXHRcdGNvbnN0IHVsID0gbGkucGFyZW50Tm9kZTtcblx0XHRjb25zdCB0aHVtYnMgPSB1bC5xdWVyeVNlbGVjdG9yQWxsKCdsaScpO1xuXG5cdFx0QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbCh0aHVtYnMsIGZ1bmN0aW9uKGVsKXtcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoJ3NlbGVjdGVkJyk7XG5cdFx0fSk7XG5cblx0XHRsaS5jbGFzc0xpc3QuYWRkKCdzZWxlY3RlZCcpO1xuXG5cdFx0dGhpcy51cGRhdGVWaWRlb0luZm8obGkuZ2V0QXR0cmlidXRlKCdkYXRhLXRpdGxlJyksIGxpLmdldEF0dHJpYnV0ZSgnZGF0YS1kZXNjcmlwdGlvbicpKTtcblx0fVxuXG5cdHVwZGF0ZVZpZGVvSW5mbyh0aXRsZSwgZGVzY3JpcHRpb24pIHtcblx0XHRjb25zdCB0aXRsZUVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLnl0cGxheWVyLXRpdGxlJyk7XG5cdFx0Y29uc3QgZGVzY3JpcHRpb25FbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy55dHBsYXllci1kZXNjcmlwdGlvbicpO1xuXG5cdFx0aWYgKHRpdGxlRWxlbWVudCkge1xuXHRcdFx0dGl0bGVFbGVtZW50LmlubmVySFRNTCA9IHRpdGxlO1xuXHRcdH1cblxuXHRcdGlmIChkZXNjcmlwdGlvbkVsZW1lbnQpIHtcblx0XHRcdGRlc2NyaXB0aW9uRWxlbWVudC5pbm5lckhUTUwgPSBkZXNjcmlwdGlvbjtcblx0XHR9XG5cdH1cblxuXHRhZGRJdGVtKHNuaXBwZXQpIHtcblx0XHRjb25zdCB1bCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcueXRwbGF5ZXItbGlzdCcpO1xuXG5cdFx0aWYgKCFzbmlwcGV0LnRodW1ibmFpbHMpIHtcblx0XHRcdGNvbnNvbGUud2FybignSXRlbSBoYXMgbm8gdGh1bWJuYWlscyEnLCBzbmlwcGV0KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb25zdCB0aHVtYm5haWwgPSBzbmlwcGV0LnRodW1ibmFpbHMubWVkaXVtLnVybDtcblx0XHRjb25zdCB2aWRlb0lkID0gc25pcHBldC5yZXNvdXJjZUlkLnZpZGVvSWQ7XG5cdFx0Y29uc3QgaW1nID0gYDxpbWcgc3JjPVwiJHt0aHVtYm5haWx9XCIgLz5gO1xuXHRcdGNvbnN0IGxpID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuXHRcdGxpLmlubmVySFRNTCA9IGltZztcblx0XHRsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaWQnLCB2aWRlb0lkKTtcblx0XHRsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGl0bGUnLCBzbmlwcGV0LnRpdGxlKTtcblx0XHRsaS5zZXRBdHRyaWJ1dGUoJ2RhdGEtZGVzY3JpcHRpb24nLCBzbmlwcGV0LmRlc2NyaXB0aW9uKTtcblx0XHRsaS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldmVudCkgPT4ge1xuXHRcdFx0Y29uc3QgbGkgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcblx0XHRcdHRoaXMudXBkYXRlUGxheWxpc3QobGkpO1xuXHRcdFx0dGhpcy51cGRhdGVWaWRlbyhsaSk7XG5cblx0XHRcdGlmICh0eXBlb2YgdGhpcy5jYl9wbGF5bGlzdF9jbGljayA9PT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHR0aGlzLmNiX3BsYXlsaXN0X2NsaWNrKGxpKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdHVsLmFwcGVuZENoaWxkKGxpKTtcblx0fVxuXG5cdHNob3dWaWRlbyh2aWRlb0lkKSB7XG5cdFx0LypnbG9iYWwgWVQqL1xuXHRcdHRoaXMucGxheWVyID0gbmV3IFlULlBsYXllcih0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignLnl0cGxheWVyLXZpZGVvJyksIHtcblx0XHRcdHZpZGVvSWQ6IHZpZGVvSWQsXG5cdFx0XHRwbGF5ZXJWYXJzOiB7XG5cdFx0XHRcdCdyZWwnOiAwLFxuXHRcdFx0XHQnc2hvd2luZm8nOiAwXG5cdFx0XHR9LFxuXHRcdFx0ZXZlbnRzOiB7XG5cdFx0XHRcdC8vJ29uUmVhZHknOiBvblBsYXllclJlYWR5LFxuXHRcdFx0XHQvLydvblN0YXRlQ2hhbmdlJzogb25QbGF5ZXJTdGF0ZUNoYW5nZVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG59XG4iXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUE7Ozs7Ozs7Ozs7QUFVQSxZQUFZLENBQUM7O0FBRWIsQUFBZSxNQUFNLFFBQVEsQ0FBQztDQUM3QixXQUFXLENBQUMsT0FBTyxFQUFFO0VBQ3BCLElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztFQUMvQixJQUFJLENBQUMsaUJBQWlCLEdBQUcsT0FBTyxDQUFDLGlCQUFpQixDQUFDO0VBQ25ELElBQUksQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQztFQUMvQixJQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLGtCQUFrQixDQUFDLENBQUM7RUFDaEUsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQzs7RUFFMUQsSUFBSSxJQUFJLENBQUMsVUFBVSxFQUFFO0dBQ3BCLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQztHQUNyQixNQUFNO0dBQ04sSUFBSSxDQUFD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"}